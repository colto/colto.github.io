!function(i){var e=i(window),s=i("body"),o=i("#wrapper"),t=i("#header"),l=i("#footer"),a=i("#main"),n=a.children("article");if(breakpoints({xlarge:["1281px","1680px"],large:["981px","1280px"],medium:["737px","980px"],small:["481px","736px"],xsmall:["361px","480px"],xxsmall:[null,"360px"]}),e.on("load",function(){window.setTimeout(function(){s.removeClass("is-preload")},100)}),"ie"==browser.name){var r;e.on("resize.flexbox-fix",function(){clearTimeout(r),r=setTimeout(function(){o.prop("scrollHeight")>e.height()?o.css("height","auto"):o.css("height","100vh")},250)}).triggerHandler("resize.flexbox-fix")}var c=t.children("nav"),h=c.find("li");h.length%2==0&&(c.addClass("use-middle"),h.eq(h.length/2).addClass("is-middle"));var d=325,u=!1;if(a._show=function(i,o){var r=n.filter("#"+i);if(0!=r.length){if(u||void 0!==o&&!0===o)return s.addClass("is-switching"),s.addClass("is-article-visible"),n.removeClass("active"),t.hide(),l.hide(),a.show(),r.show(),r.addClass("active"),u=!1,void setTimeout(function(){s.removeClass("is-switching")},o?1e3:0);if(u=!0,s.hasClass("is-article-visible")){var c=n.filter(".active");c.removeClass("active"),setTimeout(function(){c.hide(),r.show(),setTimeout(function(){r.addClass("active"),e.scrollTop(0).triggerHandler("resize.flexbox-fix"),setTimeout(function(){u=!1},d)},25)},d)}else s.addClass("is-article-visible"),setTimeout(function(){t.hide(),l.hide(),a.show(),r.show(),setTimeout(function(){r.addClass("active"),e.scrollTop(0).triggerHandler("resize.flexbox-fix"),setTimeout(function(){u=!1},d)},25)},d)}},a._hide=function(i){var o=n.filter(".active");if(s.hasClass("is-article-visible")){if(void 0!==i&&!0===i&&history.pushState(null,null,"#"),u)return s.addClass("is-switching"),o.removeClass("active"),o.hide(),a.hide(),l.show(),t.show(),s.removeClass("is-article-visible"),u=!1,s.removeClass("is-switching"),void e.scrollTop(0).triggerHandler("resize.flexbox-fix");u=!0,o.removeClass("active"),setTimeout(function(){o.hide(),a.hide(),l.show(),t.show(),setTimeout(function(){s.removeClass("is-article-visible"),e.scrollTop(0).triggerHandler("resize.flexbox-fix"),setTimeout(function(){u=!1},d)},25)},d)}},n.each(function(){var e=i(this);i('<div class="close">Close</div>').appendTo(e).on("click",function(){location.hash=""}),e.on("click",function(i){i.stopPropagation()})}),s.on("click",function(){s.hasClass("is-article-visible")&&a._hide(!0)}),e.on("keyup",function(i){switch(i.keyCode){case 27:s.hasClass("is-article-visible")&&a._hide(!0)}}),e.on("hashchange",function(i){""==location.hash||"#"==location.hash?(i.preventDefault(),i.stopPropagation(),a._hide()):n.filter(location.hash).length>0&&(i.preventDefault(),i.stopPropagation(),a._show(location.hash.substr(1)))}),"scrollRestoration"in history)history.scrollRestoration="manual";else{var f=0,v=0,p=i("html,body");e.on("scroll",function(){f=v,v=p.scrollTop()}).on("hashchange",function(){e.scrollTop(f)})}a.hide(),n.hide(),""!=location.hash&&"#"!=location.hash&&e.on("load",function(){a._show(location.hash.substr(1),!0)})}(jQuery);